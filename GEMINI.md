# Проект RedPill: Мультиагентная торговая система

Мультиагентная система для автоматизированной торговли на бирже Bybit, построенная на базе LangChain с использованием паттерна Supervisor + Workers.

## Обзор архитектуры
Система состоит из главного агента (Supervisor) и трех специализированных субагентов:
1. **Supervisor (Диспетчер):** Координирует рабочий процесс, поочередно вызывая субагентов и собирая итоговый отчет.
2. **Analyst (Аналитик):** Анализирует рыночные данные (свечи 15м, Pivot уровни, Z-Score) и дает торговую рекомендацию.
3. **Money Manager (Риск-менеджер):** Рассчитывает объем позиции (Qty) и уровни риска (SL/TP) на основе баланса и анализа.
4. **Trader (Исполнитель):** Выполняет торговые операции на бирже Bybit (размещение ордеров, установка стопов).

## Технологический стек
- **Язык:** Python 3.x
- **Фреймворк агентов:** LangChain
- **LLM:** Claude (через эндпоинт Z.ai)
- **Биржа:** Bybit (библиотека `pybit`)
- **Инфраструктура:** Docker, docker-compose

## Структура проекта
- `main.py`: Точка входа, запускающая бесконечный цикл торговли (раз в 15 минут).
- `agents/`: Реализация логики и промптов каждого агента.
- `tools/`: Набор инструментов (инструментарий LangChain) для взаимодействия с API биржи и математических расчетов.
- `core/`: Базовая конфигурация, клиент Bybit и настройки LLM.
- `redpill-plan.md`: Исходный план разработки и описание стратегии.

## Настройка и запуск

### Требования
- Python 3.9+
- API ключи Bybit (Testnet или Mainnet)
- API ключ Z.ai (для доступа к LLM)

### Установка зависимостей
```bash
pip install -r requirements.txt
```

### Конфигурация
Создайте файл `.env` в корневой директории и заполните его:
```env
BYBIT_API_KEY=ваш_ключ
BYBIT_API_SECRET=ваш_секрет
BYBIT_TESTNET=true
ZAI_API_KEY=ваш_ключ_zai
```

### Запуск
```bash
python main.py
```

Или через Docker:
```bash
docker-compose up --build
```

## Правила разработки
- Все промпты и логи системы ведутся на **русском языке**.
- Новые инструменты должны оформляться как `@tool` в директории `tools/`.
- Логика принятия решений субагентами не должна дублироваться в Supervisor.
- Все операции с биржей проходят через категорию `linear` (бессрочные контракты).
